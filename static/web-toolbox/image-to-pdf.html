<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ===================== SEO META ===================== -->
    <title>å›¾ç‰‡åˆå¹¶ä¸ºPDF - åœ¨çº¿å›¾ç‰‡è½¬PDFå·¥å…· | Web Toolbox</title>
    <meta name="description" content="å…è´¹åœ¨çº¿å›¾ç‰‡åˆå¹¶ä¸ºPDFå·¥å…·ï¼Œæ”¯æŒå¤šå›¾æ‹–æ‹½æ’åºã€æˆªå›¾ç²˜è´´ã€æ‰‹æœºæ‰«ç ä¸Šä¼ ã€‚æ”¯æŒJPG/PNG/WEBPæ ¼å¼ï¼Œå¯è‡ªå®šä¹‰é¡µé¢å°ºå¯¸ï¼Œä¸€é”®ç”Ÿæˆé«˜è´¨é‡PDFæ–‡ä»¶ã€‚">
    <meta name="keywords" content="å›¾ç‰‡è½¬PDF,å›¾ç‰‡åˆå¹¶PDF,å¤šå›¾åˆå¹¶,æˆªå›¾è½¬PDF,åœ¨çº¿PDFç”Ÿæˆ,å›¾ç‰‡æ‹–æ‹½æ’åº,å…è´¹PDFå·¥å…·">
    <meta name="author" content="heyuan110">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.heyuan110.com/web-toolbox/image-to-pdf.html">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.heyuan110.com/web-toolbox/image-to-pdf.html">
    <meta property="og:title" content="å›¾ç‰‡åˆå¹¶ä¸ºPDF - åœ¨çº¿å›¾ç‰‡è½¬PDFå·¥å…·">
    <meta property="og:description" content="å…è´¹åœ¨çº¿å›¾ç‰‡åˆå¹¶ä¸ºPDFå·¥å…·ï¼Œæ”¯æŒå¤šå›¾æ‹–æ‹½æ’åºã€æˆªå›¾ç²˜è´´ã€æ‰‹æœºæ‰«ç ä¸Šä¼ ï¼Œä¸€é”®ç”Ÿæˆé«˜è´¨é‡PDFã€‚">
    <meta property="og:image" content="https://www.heyuan110.com/web-toolbox/screenshots/image-to-pdf.png">
    <meta property="og:locale" content="zh_CN">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="å›¾ç‰‡åˆå¹¶ä¸ºPDF - åœ¨çº¿å›¾ç‰‡è½¬PDFå·¥å…·">
    <meta name="twitter:description" content="å…è´¹åœ¨çº¿å›¾ç‰‡åˆå¹¶ä¸ºPDFï¼Œæ”¯æŒæ‹–æ‹½æ’åºã€æˆªå›¾ç²˜è´´ã€æ‰‹æœºæ‰«ç ä¸Šä¼ ã€‚">

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "å›¾ç‰‡åˆå¹¶ä¸ºPDF",
        "description": "å…è´¹åœ¨çº¿å›¾ç‰‡åˆå¹¶ä¸ºPDFå·¥å…·ï¼Œæ”¯æŒå¤šå›¾æ‹–æ‹½æ’åºã€æˆªå›¾ç²˜è´´ä¸Šä¼ ï¼Œä¸€é”®ç”Ÿæˆé«˜è´¨é‡PDFæ–‡ä»¶",
        "url": "https://www.heyuan110.com/web-toolbox/image-to-pdf.html",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Web Browser",
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "CNY"},
        "author": {"@type": "Person", "name": "heyuan110"}
    }
    </script>
    <!-- ===================== /SEO META ===================== -->

    <!-- ===================== TOOL_META ===================== -->
    <script>
    const TOOL_META = {
        slug: 'image-to-pdf',
        name: 'å›¾ç‰‡åˆå¹¶ä¸ºPDF',
        description: 'å¤šå›¾æ‹–æ‹½æ’åºã€æˆªå›¾ç²˜è´´ã€æ‰‹æœºæ‰«ç ä¸Šä¼ ï¼Œä¸€é”®ç”Ÿæˆé«˜è´¨é‡PDFæ–‡ä»¶',
        keywords: ['å›¾ç‰‡è½¬PDF', 'åˆå¹¶PDF', 'æˆªå›¾è½¬PDF', 'æ‹–æ‹½æ’åº']
    };
    </script>
    <!-- ===================== /TOOL_META ===================== -->

    <!-- ä¾èµ–åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <!-- ===================== UI ===================== -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e4e4e7;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* å¤´éƒ¨ */
        header {
            text-align: center;
            margin-bottom: 40px;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: #a78bfa;
            text-decoration: none;
            font-size: 0.9rem;
            margin-bottom: 20px;
            transition: color 0.2s;
        }

        .back-link:hover {
            color: #c4b5fd;
        }

        h1 {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(120deg, #00d4ff, #7c3aed, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .subtitle {
            color: #a1a1aa;
            font-size: 1rem;
        }

        /* ä¸»ä½“å¸ƒå±€ */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 24px;
        }

        @media (max-width: 900px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }

        /* å¡ç‰‡ */
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ä¸Šä¼ åŒºåŸŸ */
        .upload-zone {
            border: 2px dashed rgba(124, 58, 237, 0.4);
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(124, 58, 237, 0.05);
            margin-bottom: 20px;
        }

        .upload-zone:hover,
        .upload-zone.dragover {
            border-color: #7c3aed;
            background: rgba(124, 58, 237, 0.15);
        }

        .upload-zone.dragover {
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        .upload-text {
            color: #d4d4d8;
            margin-bottom: 8px;
        }

        .upload-hint {
            color: #71717a;
            font-size: 0.85rem;
        }

        .upload-hint kbd {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: inherit;
        }

        .hidden-input {
            display: none;
        }

        /* å¿«æ·ä¸Šä¼ æŒ‰é’® */
        .quick-upload {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .quick-btn {
            flex: 1;
            min-width: 140px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #e4e4e7;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .quick-btn:hover {
            background: rgba(124, 58, 237, 0.2);
            border-color: rgba(124, 58, 237, 0.5);
        }

        /* å›¾ç‰‡åˆ—è¡¨ */
        .image-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 16px;
            min-height: 100px;
        }

        .image-list:empty::before {
            content: "æš‚æ— å›¾ç‰‡ï¼Œè¯·ä¸Šä¼ å›¾ç‰‡";
            grid-column: 1 / -1;
            text-align: center;
            color: #71717a;
            padding: 40px;
        }

        .image-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            cursor: grab;
            transition: all 0.2s;
            aspect-ratio: 1;
        }

        .image-item:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .image-item.sortable-ghost {
            opacity: 0.4;
        }

        .image-item.sortable-chosen {
            box-shadow: 0 0 0 3px #7c3aed;
        }

        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-index {
            position: absolute;
            top: 8px;
            left: 8px;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .image-remove {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(239, 68, 68, 0.9);
            color: #fff;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .image-item:hover .image-remove {
            opacity: 1;
        }

        .image-remove:hover {
            background: #dc2626;
        }

        .image-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 6px 8px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: #fff;
            font-size: 0.7rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* å³ä¾§è®¾ç½® */
        .settings-section {
            margin-bottom: 24px;
        }

        .setting-label {
            display: block;
            color: #a1a1aa;
            font-size: 0.85rem;
            margin-bottom: 8px;
        }

        .setting-select,
        .setting-input {
            width: 100%;
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: #e4e4e7;
            font-size: 0.95rem;
            outline: none;
            transition: border-color 0.2s;
        }

        .setting-select:focus,
        .setting-input:focus {
            border-color: #7c3aed;
        }

        .setting-select option {
            background: #1a1a2e;
        }

        /* äºŒç»´ç åŒºåŸŸ */
        .qrcode-section {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            margin-bottom: 24px;
        }

        .qrcode-title {
            font-size: 0.9rem;
            color: #a1a1aa;
            margin-bottom: 12px;
        }

        #qrcode {
            display: inline-block;
            padding: 12px;
            background: #fff;
            border-radius: 8px;
        }

        #qrcode img {
            display: block;
        }

        .qrcode-hint {
            font-size: 0.75rem;
            color: #71717a;
            margin-top: 10px;
        }

        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats {
            display: flex;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #7c3aed;
        }

        .stat-label {
            font-size: 0.75rem;
            color: #71717a;
        }

        /* ç”ŸæˆæŒ‰é’® */
        .generate-btn {
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(135deg, #7c3aed, #6366f1);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .generate-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #8b5cf6, #818cf8);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(124, 58, 237, 0.3);
        }

        .generate-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .generate-btn.loading {
            pointer-events: none;
        }

        /* æ¸…ç©ºæŒ‰é’® */
        .clear-btn {
            width: 100%;
            padding: 10px;
            background: transparent;
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #f87171;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 12px;
        }

        .clear-btn:hover {
            background: rgba(239, 68, 68, 0.1);
            border-color: #f87171;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 12px;
            display: none;
        }

        .progress-bar.active {
            display: block;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #7c3aed, #06b6d4);
            border-radius: 3px;
            transition: width 0.3s;
        }

        /* ä½¿ç”¨è¯´æ˜ */
        .usage-section {
            margin-top: 24px;
        }

        .usage-list {
            list-style: none;
        }

        .usage-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            gap: 12px;
            color: #a1a1aa;
            font-size: 0.9rem;
        }

        .usage-list li:last-child {
            border-bottom: none;
        }

        .usage-step {
            width: 24px;
            height: 24px;
            background: rgba(124, 58, 237, 0.2);
            color: #a78bfa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        /* Toast æç¤º */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(0, 0, 0, 0.9);
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.9rem;
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast.success {
            background: rgba(34, 197, 94, 0.9);
        }

        .toast.error {
            background: rgba(239, 68, 68, 0.9);
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #71717a;
            font-size: 0.85rem;
        }

        footer a {
            color: #a78bfa;
            text-decoration: none;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.6rem;
            }

            .quick-upload {
                flex-direction: column;
            }

            .quick-btn {
                min-width: 100%;
            }

            .image-list {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
        }
    </style>
    <!-- ===================== /UI ===================== -->
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">â† è¿”å›å·¥å…·åˆ—è¡¨</a>
            <h1>ğŸ“„ å›¾ç‰‡åˆå¹¶ä¸ºPDF</h1>
            <p class="subtitle">å¤šå›¾æ‹–æ‹½æ’åºã€æˆªå›¾ç²˜è´´ã€æ‰‹æœºæ‰«ç ä¸Šä¼ ï¼Œä¸€é”®ç”Ÿæˆé«˜è´¨é‡PDF</p>
        </header>

        <div class="main-layout">
            <!-- å·¦ä¾§ï¼šä¸Šä¼ å’Œå›¾ç‰‡åˆ—è¡¨ -->
            <div class="left-panel">
                <div class="card">
                    <h2 class="card-title">ğŸ“¤ ä¸Šä¼ å›¾ç‰‡</h2>

                    <!-- ä¸Šä¼ åŒºåŸŸ -->
                    <div class="upload-zone" id="uploadZone">
                        <div class="upload-icon">ğŸ–¼ï¸</div>
                        <p class="upload-text">ç‚¹å‡»é€‰æ‹©å›¾ç‰‡ æˆ– æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„</p>
                        <p class="upload-hint">
                            æ”¯æŒ JPG / PNG / WEBP / GIF / BMP æ ¼å¼<br>
                            æˆªå›¾ç²˜è´´ï¼š<kbd>Ctrl</kbd> + <kbd>V</kbd> (Mac: <kbd>âŒ˜</kbd> + <kbd>V</kbd>)
                        </p>
                    </div>
                    <input type="file" id="fileInput" class="hidden-input" multiple accept="image/*">

                    <!-- å¿«æ·æŒ‰é’® -->
                    <div class="quick-upload">
                        <button class="quick-btn" id="btnSelectFiles">
                            ğŸ“ é€‰æ‹©æ–‡ä»¶
                        </button>
                        <button class="quick-btn" id="btnSelectFolder">
                            ğŸ“‚ é€‰æ‹©æ–‡ä»¶å¤¹
                        </button>
                    </div>
                    <input type="file" id="folderInput" class="hidden-input" webkitdirectory multiple accept="image/*">

                    <!-- å›¾ç‰‡åˆ—è¡¨ -->
                    <h3 class="card-title" style="margin-top: 24px;">ğŸ–¼ï¸ å›¾ç‰‡åˆ—è¡¨ <span style="font-weight: normal; font-size: 0.85rem; color: #71717a;">(æ‹–æ‹½å¯è°ƒæ•´é¡ºåº)</span></h3>
                    <div class="image-list" id="imageList"></div>
                </div>
            </div>

            <!-- å³ä¾§ï¼šè®¾ç½®å’Œæ“ä½œ -->
            <div class="right-panel">
                <!-- äºŒç»´ç  -->
                <div class="card">
                    <div class="qrcode-section">
                        <p class="qrcode-title">ğŸ“± æ‰‹æœºæ‰«ç ä¸Šä¼ </p>
                        <div id="qrcode"></div>
                        <p class="qrcode-hint">æ‰‹æœºæ‰«ç æ‰“å¼€æœ¬å·¥å…·<br>ç›´æ¥åœ¨æ‰‹æœºä¸Šé€‰æ‹©å›¾ç‰‡</p>
                    </div>
                </div>

                <!-- è®¾ç½® -->
                <div class="card" style="margin-top: 20px;">
                    <h2 class="card-title">âš™ï¸ PDF è®¾ç½®</h2>

                    <div class="settings-section">
                        <label class="setting-label">é¡µé¢å°ºå¯¸</label>
                        <select class="setting-select" id="pageSize">
                            <option value="a4">A4 (210 Ã— 297 mm)</option>
                            <option value="a3">A3 (297 Ã— 420 mm)</option>
                            <option value="a5">A5 (148 Ã— 210 mm)</option>
                            <option value="letter">Letter (216 Ã— 279 mm)</option>
                            <option value="fit" selected>è‡ªé€‚åº”å›¾ç‰‡å°ºå¯¸</option>
                        </select>
                    </div>

                    <div class="settings-section">
                        <label class="setting-label">é¡µé¢æ–¹å‘</label>
                        <select class="setting-select" id="pageOrientation">
                            <option value="auto" selected>è‡ªåŠ¨åˆ¤æ–­</option>
                            <option value="portrait">çºµå‘</option>
                            <option value="landscape">æ¨ªå‘</option>
                        </select>
                    </div>

                    <div class="settings-section">
                        <label class="setting-label">å›¾ç‰‡è´¨é‡</label>
                        <select class="setting-select" id="imageQuality">
                            <option value="1">æœ€é«˜è´¨é‡</option>
                            <option value="0.9" selected>é«˜è´¨é‡ (æ¨è)</option>
                            <option value="0.7">ä¸­ç­‰è´¨é‡</option>
                            <option value="0.5">ä½è´¨é‡ (æ–‡ä»¶æ›´å°)</option>
                        </select>
                    </div>

                    <div class="settings-section">
                        <label class="setting-label">é¡µè¾¹è· (mm)</label>
                        <input type="number" class="setting-input" id="pageMargin" value="10" min="0" max="50">
                    </div>

                    <div class="settings-section">
                        <label class="setting-label">æ–‡ä»¶å</label>
                        <input type="text" class="setting-input" id="fileName" value="merged" placeholder="è¾“å…¥æ–‡ä»¶å">
                    </div>

                    <!-- ç»Ÿè®¡ -->
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-value" id="imageCount">0</div>
                            <div class="stat-label">å›¾ç‰‡æ•°é‡</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalSize">0</div>
                            <div class="stat-label">æ€»å¤§å° (MB)</div>
                        </div>
                    </div>

                    <!-- ç”ŸæˆæŒ‰é’® -->
                    <button class="generate-btn" id="generateBtn" disabled>
                        ğŸ“„ ç”Ÿæˆ PDF
                    </button>
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>

                    <button class="clear-btn" id="clearBtn">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰å›¾ç‰‡</button>
                </div>

                <!-- ä½¿ç”¨è¯´æ˜ -->
                <div class="card usage-section" style="margin-top: 20px;">
                    <h2 class="card-title">ğŸ“– ä½¿ç”¨è¯´æ˜</h2>
                    <ul class="usage-list">
                        <li>
                            <span class="usage-step">1</span>
                            <span>ä¸Šä¼ å›¾ç‰‡ï¼šç‚¹å‡»é€‰æ‹©ã€æ‹–æ‹½ä¸Šä¼ ã€ç²˜è´´æˆªå›¾æˆ–æ‰‹æœºæ‰«ç </span>
                        </li>
                        <li>
                            <span class="usage-step">2</span>
                            <span>æ‹–æ‹½å›¾ç‰‡è°ƒæ•´é¡ºåºï¼Œç¡®ä¿PDFé¡µé¢æ’åˆ—æ­£ç¡®</span>
                        </li>
                        <li>
                            <span class="usage-step">3</span>
                            <span>è®¾ç½®é¡µé¢å°ºå¯¸ã€æ–¹å‘å’Œè´¨é‡ç­‰å‚æ•°</span>
                        </li>
                        <li>
                            <span class="usage-step">4</span>
                            <span>ç‚¹å‡»"ç”ŸæˆPDF"æŒ‰é’®ï¼Œè‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <footer>
            <p>Made with â¤ï¸ by <a href="https://github.com/heyuan110" target="_blank">@heyuan110</a> | <a href="index.html">è¿”å›å·¥å…·åˆ—è¡¨</a></p>
        </footer>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- ===================== LOGIC ===================== -->
    <script>
    (function() {
        'use strict';

        // ===== å…¨å±€å˜é‡ =====
        let images = []; // å­˜å‚¨å›¾ç‰‡æ•°æ® { id, file, dataUrl, name }
        let sortable = null;

        // ===== DOM å…ƒç´  =====
        const uploadZone = document.getElementById('uploadZone');
        const fileInput = document.getElementById('fileInput');
        const folderInput = document.getElementById('folderInput');
        const imageList = document.getElementById('imageList');
        const generateBtn = document.getElementById('generateBtn');
        const clearBtn = document.getElementById('clearBtn');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const imageCountEl = document.getElementById('imageCount');
        const totalSizeEl = document.getElementById('totalSize');
        const toast = document.getElementById('toast');

        // ===== åˆå§‹åŒ– =====
        function init() {
            initQRCode();
            initEventListeners();
            initSortable();
        }

        // ç”ŸæˆäºŒç»´ç 
        function initQRCode() {
            const qrcodeContainer = document.getElementById('qrcode');
            if (qrcodeContainer && typeof QRCode !== 'undefined') {
                new QRCode(qrcodeContainer, {
                    text: window.location.href,
                    width: 120,
                    height: 120,
                    colorDark: '#1a1a2e',
                    colorLight: '#ffffff',
                    correctLevel: QRCode.CorrectLevel.M
                });
            }
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        function initEventListeners() {
            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸ
            uploadZone.addEventListener('click', () => fileInput.click());

            // æ–‡ä»¶é€‰æ‹©
            fileInput.addEventListener('change', handleFileSelect);
            folderInput.addEventListener('change', handleFileSelect);

            // å¿«æ·æŒ‰é’®
            document.getElementById('btnSelectFiles').addEventListener('click', (e) => {
                e.stopPropagation();
                fileInput.click();
            });
            document.getElementById('btnSelectFolder').addEventListener('click', (e) => {
                e.stopPropagation();
                folderInput.click();
            });

            // æ‹–æ‹½ä¸Šä¼ 
            uploadZone.addEventListener('dragover', handleDragOver);
            uploadZone.addEventListener('dragleave', handleDragLeave);
            uploadZone.addEventListener('drop', handleDrop);

            // å…¨å±€æ‹–æ‹½ï¼ˆé˜²æ­¢æµè§ˆå™¨æ‰“å¼€æ–‡ä»¶ï¼‰
            document.addEventListener('dragover', (e) => e.preventDefault());
            document.addEventListener('drop', (e) => e.preventDefault());

            // ç²˜è´´ä¸Šä¼ 
            document.addEventListener('paste', handlePaste);

            // ç”Ÿæˆ PDF
            generateBtn.addEventListener('click', generatePDF);

            // æ¸…ç©º
            clearBtn.addEventListener('click', clearAllImages);
        }

        // åˆå§‹åŒ–æ‹–æ‹½æ’åº
        function initSortable() {
            sortable = new Sortable(imageList, {
                animation: 150,
                ghostClass: 'sortable-ghost',
                chosenClass: 'sortable-chosen',
                onEnd: function(evt) {
                    // æ›´æ–°æ•°ç»„é¡ºåº
                    const movedItem = images.splice(evt.oldIndex, 1)[0];
                    images.splice(evt.newIndex, 0, movedItem);
                    updateIndexNumbers();
                }
            });
        }

        // ===== æ–‡ä»¶å¤„ç† =====
        function handleFileSelect(e) {
            const files = Array.from(e.target.files);
            processFiles(files);
            e.target.value = ''; // æ¸…ç©ºä»¥ä¾¿é‡å¤é€‰æ‹©
        }

        function handleDragOver(e) {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            const files = Array.from(e.dataTransfer.files);
            processFiles(files);
        }

        function handlePaste(e) {
            const items = e.clipboardData?.items;
            if (!items) return;

            const imageFiles = [];
            for (const item of items) {
                if (item.type.startsWith('image/')) {
                    const file = item.getAsFile();
                    if (file) {
                        // ç”Ÿæˆæ–‡ä»¶å
                        const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, 19);
                        const ext = file.type.split('/')[1] || 'png';
                        const namedFile = new File([file], `screenshot-${timestamp}.${ext}`, { type: file.type });
                        imageFiles.push(namedFile);
                    }
                }
            }

            if (imageFiles.length > 0) {
                processFiles(imageFiles);
                showToast(`å·²ç²˜è´´ ${imageFiles.length} å¼ å›¾ç‰‡`, 'success');
            }
        }

        // å¤„ç†æ–‡ä»¶
        async function processFiles(files) {
            // è¿‡æ»¤å›¾ç‰‡æ–‡ä»¶
            const imageFiles = files.filter(file => file.type.startsWith('image/'));

            if (imageFiles.length === 0) {
                showToast('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶', 'error');
                return;
            }

            // æŒ‰æ–‡ä»¶åæ’åº
            imageFiles.sort((a, b) => a.name.localeCompare(b.name, 'zh-CN', { numeric: true }));

            for (const file of imageFiles) {
                try {
                    const dataUrl = await readFileAsDataURL(file);
                    const imageData = {
                        id: Date.now() + Math.random().toString(36).substr(2, 9),
                        file: file,
                        dataUrl: dataUrl,
                        name: file.name
                    };
                    images.push(imageData);
                    addImageToList(imageData);
                } catch (err) {
                    console.error('è¯»å–æ–‡ä»¶å¤±è´¥:', err);
                }
            }

            updateStats();
            updateGenerateButton();
            showToast(`å·²æ·»åŠ  ${imageFiles.length} å¼ å›¾ç‰‡`, 'success');
        }

        function readFileAsDataURL(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // ===== UI æ“ä½œ =====
        function addImageToList(imageData) {
            const div = document.createElement('div');
            div.className = 'image-item';
            div.dataset.id = imageData.id;

            div.innerHTML = `
                <span class="image-index">${images.length}</span>
                <img src="${imageData.dataUrl}" alt="${imageData.name}">
                <button class="image-remove" title="åˆ é™¤">Ã—</button>
                <span class="image-name">${imageData.name}</span>
            `;

            // åˆ é™¤æŒ‰é’®
            div.querySelector('.image-remove').addEventListener('click', (e) => {
                e.stopPropagation();
                removeImage(imageData.id);
            });

            imageList.appendChild(div);
        }

        function removeImage(id) {
            images = images.filter(img => img.id !== id);
            const el = document.querySelector(`.image-item[data-id="${id}"]`);
            if (el) {
                el.style.transform = 'scale(0)';
                setTimeout(() => {
                    el.remove();
                    updateIndexNumbers();
                    updateStats();
                    updateGenerateButton();
                }, 200);
            }
        }

        function clearAllImages() {
            if (images.length === 0) return;
            if (!confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å›¾ç‰‡å—ï¼Ÿ')) return;

            images = [];
            imageList.innerHTML = '';
            updateStats();
            updateGenerateButton();
            showToast('å·²æ¸…ç©ºæ‰€æœ‰å›¾ç‰‡', 'success');
        }

        function updateIndexNumbers() {
            const items = imageList.querySelectorAll('.image-item');
            items.forEach((item, index) => {
                item.querySelector('.image-index').textContent = index + 1;
            });
        }

        function updateStats() {
            imageCountEl.textContent = images.length;
            const totalBytes = images.reduce((sum, img) => sum + (img.file?.size || 0), 0);
            totalSizeEl.textContent = (totalBytes / 1024 / 1024).toFixed(2);
        }

        function updateGenerateButton() {
            generateBtn.disabled = images.length === 0;
        }

        // ===== ç”Ÿæˆ PDF =====
        async function generatePDF() {
            if (images.length === 0) {
                showToast('è¯·å…ˆæ·»åŠ å›¾ç‰‡', 'error');
                return;
            }

            const pageSize = document.getElementById('pageSize').value;
            const orientation = document.getElementById('pageOrientation').value;
            const quality = parseFloat(document.getElementById('imageQuality').value);
            const margin = parseInt(document.getElementById('pageMargin').value) || 0;
            const fileName = document.getElementById('fileName').value.trim() || 'merged';

            generateBtn.disabled = true;
            generateBtn.innerHTML = 'â³ ç”Ÿæˆä¸­...';
            progressBar.classList.add('active');
            progressFill.style.width = '0%';

            try {
                const { jsPDF } = window.jspdf;
                let pdf = null;

                for (let i = 0; i < images.length; i++) {
                    const img = images[i];
                    const progress = ((i + 1) / images.length) * 100;
                    progressFill.style.width = `${progress}%`;

                    // åŠ è½½å›¾ç‰‡è·å–å°ºå¯¸
                    const imgEl = await loadImage(img.dataUrl);
                    const imgWidth = imgEl.width;
                    const imgHeight = imgEl.height;

                    // ç¡®å®šé¡µé¢æ–¹å‘
                    let pageOrientation = orientation;
                    if (orientation === 'auto') {
                        pageOrientation = imgWidth > imgHeight ? 'landscape' : 'portrait';
                    }

                    // ç¡®å®šé¡µé¢å°ºå¯¸
                    let pdfWidth, pdfHeight;
                    if (pageSize === 'fit') {
                        // è‡ªé€‚åº”ï¼šå°†åƒç´ è½¬æ¢ä¸ºæ¯«ç±³ (å‡è®¾ 96 DPI)
                        const pxToMm = 25.4 / 96;
                        pdfWidth = imgWidth * pxToMm + margin * 2;
                        pdfHeight = imgHeight * pxToMm + margin * 2;
                    } else {
                        // ä½¿ç”¨æ ‡å‡†å°ºå¯¸
                        const sizes = {
                            'a4': [210, 297],
                            'a3': [297, 420],
                            'a5': [148, 210],
                            'letter': [216, 279]
                        };
                        [pdfWidth, pdfHeight] = sizes[pageSize];
                        if (pageOrientation === 'landscape') {
                            [pdfWidth, pdfHeight] = [pdfHeight, pdfWidth];
                        }
                    }

                    // åˆ›å»ºæˆ–æ·»åŠ é¡µé¢
                    if (i === 0) {
                        pdf = new jsPDF({
                            orientation: pageOrientation,
                            unit: 'mm',
                            format: pageSize === 'fit' ? [pdfWidth, pdfHeight] : pageSize
                        });
                    } else {
                        pdf.addPage(pageSize === 'fit' ? [pdfWidth, pdfHeight] : pageSize, pageOrientation);
                    }

                    // è®¡ç®—å›¾ç‰‡åœ¨é¡µé¢ä¸­çš„ä½ç½®å’Œå°ºå¯¸
                    const pageW = pdf.internal.pageSize.getWidth();
                    const pageH = pdf.internal.pageSize.getHeight();
                    const availableW = pageW - margin * 2;
                    const availableH = pageH - margin * 2;

                    let drawWidth, drawHeight;
                    if (pageSize === 'fit') {
                        // è‡ªé€‚åº”æ¨¡å¼ï¼šå›¾ç‰‡å¡«æ»¡é¡µé¢
                        drawWidth = availableW;
                        drawHeight = availableH;
                    } else {
                        // æ ‡å‡†å°ºå¯¸ï¼šä¿æŒæ¯”ä¾‹å±…ä¸­
                        const ratio = Math.min(availableW / imgWidth, availableH / imgHeight);
                        drawWidth = imgWidth * ratio;
                        drawHeight = imgHeight * ratio;
                    }

                    const x = margin + (availableW - drawWidth) / 2;
                    const y = margin + (availableH - drawHeight) / 2;

                    // æ·»åŠ å›¾ç‰‡
                    const imgFormat = getImageFormat(img.file?.type || 'image/jpeg');
                    pdf.addImage(img.dataUrl, imgFormat, x, y, drawWidth, drawHeight, undefined, 'MEDIUM');

                    // è®© UI æœ‰æœºä¼šæ›´æ–°
                    await new Promise(r => setTimeout(r, 10));
                }

                // ä¸‹è½½ PDF
                pdf.save(`${fileName}.pdf`);
                showToast('PDF ç”ŸæˆæˆåŠŸï¼', 'success');

            } catch (err) {
                console.error('ç”Ÿæˆ PDF å¤±è´¥:', err);
                showToast('ç”Ÿæˆ PDF å¤±è´¥: ' + err.message, 'error');
            } finally {
                generateBtn.disabled = false;
                generateBtn.innerHTML = 'ğŸ“„ ç”Ÿæˆ PDF';
                progressBar.classList.remove('active');
            }
        }

        function loadImage(src) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => resolve(img);
                img.onerror = reject;
                img.src = src;
            });
        }

        function getImageFormat(mimeType) {
            const formats = {
                'image/jpeg': 'JPEG',
                'image/jpg': 'JPEG',
                'image/png': 'PNG',
                'image/webp': 'WEBP',
                'image/gif': 'GIF'
            };
            return formats[mimeType] || 'JPEG';
        }

        // ===== Toast æç¤º =====
        function showToast(message, type = '') {
            toast.textContent = message;
            toast.className = 'toast ' + type;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ===== å¯åŠ¨ =====
        init();
    })();
    </script>
    <!-- ===================== /LOGIC ===================== -->
</body>
</html>
