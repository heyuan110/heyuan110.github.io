<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ¨çº¿å®šæ—¶åˆ·æ–°ç½‘é¡µ - è‡ªåŠ¨åˆ·æ–°ç½‘å€æµ‹è¯•å·¥å…· | Web Toolbox</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="å…è´¹åœ¨çº¿å®šæ—¶åˆ·æ–°ç½‘é¡µå·¥å…·ï¼Œæ”¯æŒè‡ªå®šä¹‰åˆ·æ–°é—´éš”æ—¶é—´ï¼Œå¯ç”¨äºç½‘é¡µå‹åŠ›æµ‹è¯•ã€å¢åŠ é¡µé¢è®¿é—®é‡ã€‚çº¯å‰ç«¯å®ç°ï¼Œæ— éœ€å®‰è£…ã€‚">
    <meta name="keywords" content="å®šæ—¶åˆ·æ–°ç½‘é¡µ,è‡ªåŠ¨åˆ·æ–°ç½‘å€,ç½‘é¡µåˆ·æ–°å™¨,é¡µé¢è‡ªåŠ¨åˆ·æ–°,ç½‘ç«™å‹åŠ›æµ‹è¯•,åœ¨çº¿åˆ·æ–°å·¥å…·,page refresher,auto refresh">
    <meta name="author" content="Web Toolbox">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.heyuan110.com/web-toolbox/page-refresher.html">

    <!-- Open Graph -->
    <meta property="og:title" content="åœ¨çº¿å®šæ—¶åˆ·æ–°ç½‘é¡µ - è‡ªåŠ¨åˆ·æ–°ç½‘å€æµ‹è¯•å·¥å…·">
    <meta property="og:description" content="å…è´¹åœ¨çº¿å®šæ—¶åˆ·æ–°ç½‘é¡µå·¥å…·ï¼Œæ”¯æŒè‡ªå®šä¹‰åˆ·æ–°é—´éš”æ—¶é—´ï¼Œå¯ç”¨äºç½‘é¡µå‹åŠ›æµ‹è¯•ã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.heyuan110.com/web-toolbox/page-refresher.html">
    <meta property="og:image" content="https://www.heyuan110.com/web-toolbox/screenshots/page-refresher.png">
    <meta property="og:site_name" content="Web Toolbox">
    <meta property="og:locale" content="zh_CN">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="åœ¨çº¿å®šæ—¶åˆ·æ–°ç½‘é¡µ - è‡ªåŠ¨åˆ·æ–°ç½‘å€æµ‹è¯•å·¥å…·">
    <meta name="twitter:description" content="å…è´¹åœ¨çº¿å®šæ—¶åˆ·æ–°ç½‘é¡µå·¥å…·ï¼Œæ”¯æŒè‡ªå®šä¹‰åˆ·æ–°é—´éš”æ—¶é—´ï¼Œå¯ç”¨äºç½‘é¡µå‹åŠ›æµ‹è¯•ã€‚">
    <meta name="twitter:image" content="https://www.heyuan110.com/web-toolbox/screenshots/page-refresher.png">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "åœ¨çº¿å®šæ—¶åˆ·æ–°ç½‘é¡µå·¥å…·",
        "description": "å…è´¹åœ¨çº¿å®šæ—¶åˆ·æ–°ç½‘é¡µå·¥å…·ï¼Œæ”¯æŒè‡ªå®šä¹‰åˆ·æ–°é—´éš”æ—¶é—´ï¼Œå¯ç”¨äºç½‘é¡µå‹åŠ›æµ‹è¯•ã€å¢åŠ é¡µé¢è®¿é—®é‡ã€‚",
        "url": "https://www.heyuan110.com/web-toolbox/page-refresher.html",
        "applicationCategory": "UtilityApplication",
        "operatingSystem": "Any",
        "permissions": "browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "CNY"
        }
    }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-brand {
            font-size: 1.3rem;
            font-weight: 700;
            background: linear-gradient(135deg, #00d4ff, #7b2cbf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .back-link {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .back-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        /* è­¦å‘Šæç¤º */
        .warning-banner {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 152, 0, 0.2));
            border: 1px solid rgba(255, 193, 7, 0.5);
            border-radius: 15px;
            padding: 20px 25px;
            margin-bottom: 25px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .warning-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .warning-content h3 {
            color: #ffc107;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .warning-content p {
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* ä¸»å¡ç‰‡ */
        .main-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px;
            margin-bottom: 25px;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-title .icon {
            font-size: 1.8rem;
        }

        /* è¾“å…¥åŒºåŸŸ */
        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
        }

        .url-input-wrapper {
            display: flex;
            gap: 10px;
        }

        .url-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .url-input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.2);
        }

        .url-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        /* è®¾ç½®åŒºåŸŸ */
        .settings-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .setting-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
        }

        .setting-item label {
            display: block;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .setting-item input,
        .setting-item select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1rem;
        }

        .setting-item input:focus,
        .setting-item select:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .setting-item select option {
            background: #1a1a2e;
            color: #fff;
        }

        .mode-hint {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 8px;
            font-style: italic;
        }

        /* å¿«æ·é—´éš”æŒ‰é’® */
        .interval-presets {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .preset-btn {
            padding: 8px 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .preset-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: #00d4ff;
            color: #fff;
        }

        .preset-btn.active {
            background: linear-gradient(135deg, #00d4ff, #7b2cbf);
            border-color: transparent;
            color: #fff;
        }

        /* æ§åˆ¶æŒ‰é’® */
        .control-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .btn {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-start {
            background: linear-gradient(135deg, #00c853, #00e676);
            color: #fff;
        }

        .btn-start:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 200, 83, 0.4);
        }

        .btn-stop {
            background: linear-gradient(135deg, #ff5252, #ff1744);
            color: #fff;
        }

        .btn-stop:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 82, 82, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* çŠ¶æ€é¢æ¿ */
        .status-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .status-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .status-indicator {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #666;
            animation: none;
        }

        .status-indicator.running {
            background: #00c853;
            animation: pulse 1.5s infinite;
        }

        .status-indicator.stopped {
            background: #ff5252;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(0, 200, 83, 0.7); }
            50% { opacity: 0.8; box-shadow: 0 0 0 10px rgba(0, 200, 83, 0); }
        }

        .status-text {
            font-size: 1.1rem;
            font-weight: 500;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, #00d4ff, #7b2cbf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
        }

        /* é¢„è§ˆåŒºåŸŸ */
        .preview-section {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .preview-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .preview-url {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            max-width: 400px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .preview-actions {
            display: flex;
            gap: 10px;
        }

        .preview-btn {
            padding: 8px 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: transparent;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .preview-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .iframe-container {
            width: 100%;
            height: 500px;
            background: #fff;
            position: relative;
        }

        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .iframe-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.5);
        }

        .iframe-placeholder .icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        /* åå°æ¨¡å¼çŠ¶æ€é¢æ¿ */
        .fetch-status-panel {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 50, 100, 0.95), rgba(0, 30, 60, 0.95));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            color: #fff;
        }

        .fetch-status-panel .status-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            animation: pulse-icon 2s infinite;
        }

        @keyframes pulse-icon {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .fetch-status-panel .status-main {
            text-align: center;
            margin-bottom: 25px;
        }

        .fetch-status-panel .status-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #00d4ff;
        }

        .fetch-status-panel .status-url {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            word-break: break-all;
            max-width: 500px;
        }

        .fetch-status-panel .status-details {
            display: flex;
            gap: 30px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .fetch-status-panel .detail-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 12px;
            min-width: 120px;
        }

        .fetch-status-panel .detail-label {
            display: block;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 5px;
        }

        .fetch-status-panel .detail-value {
            display: block;
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
        }

        .fetch-status-panel .detail-value.success {
            color: #00e676;
        }

        .fetch-status-panel .detail-value.error {
            color: #ff5252;
        }

        .fetch-status-panel .status-progress {
            width: 100%;
            max-width: 400px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .fetch-status-panel .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #7b2cbf);
            width: 0%;
            transition: width 0.3s ease;
            animation: progress-pulse 1.5s infinite;
        }

        @keyframes progress-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .fetch-status-panel .status-hint {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
            text-align: center;
            max-width: 500px;
            line-height: 1.5;
        }

        /* æ—¥å¿—åŒºåŸŸ */
        .log-section {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 25px;
            overflow: hidden;
        }

        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .log-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .log-container {
            height: 200px;
            overflow-y: auto;
            padding: 15px 20px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.85rem;
        }

        .log-entry {
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.03);
            display: flex;
            gap: 15px;
        }

        .log-time {
            color: rgba(255, 255, 255, 0.5);
            flex-shrink: 0;
        }

        .log-message {
            color: rgba(255, 255, 255, 0.9);
        }

        .log-entry.success .log-message {
            color: #00e676;
        }

        .log-entry.error .log-message {
            color: #ff5252;
        }

        .log-entry.info .log-message {
            color: #00d4ff;
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .settings-row {
                grid-template-columns: 1fr;
            }

            .control-buttons {
                flex-direction: column;
            }

            .url-input-wrapper {
                flex-direction: column;
            }

            .preview-header {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }

            .preview-url {
                max-width: 100%;
            }

            .iframe-container {
                height: 350px;
            }
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨å¯¼èˆª -->
        <nav class="top-nav">
            <div class="nav-brand">ğŸ”„ å®šæ—¶åˆ·æ–°ç½‘é¡µ</div>
            <a href="index.html" class="back-link">
                <span>â†</span>
                <span>è¿”å›å·¥å…·ç®±</span>
            </a>
        </nav>

        <!-- è­¦å‘Šæç¤º -->
        <div class="warning-banner">
            <div class="warning-icon">âš ï¸</div>
            <div class="warning-content">
                <h3>å‹å–„ä½¿ç”¨æé†’</h3>
                <p>å¦‚æœåˆ·æ–°é—´éš”æ—¶é—´å¤ªçŸ­ï¼Œæœ¬å·¥å…·å¯èƒ½ä¼šç»™ç›®æ ‡ç½‘ç«™å¸¦æ¥è®¿é—®å‹åŠ›ã€‚è¯·ä¸è¦æ¶æ„åˆ·æ–°ä»–äººç½‘ç«™ï¼Œæ–‡æ˜å‹å–„åœ°ä½¿ç”¨æœ¬å·¥å…·ã€‚å»ºè®®ä»…ç”¨äºæµ‹è¯•è‡ªå·±çš„ç½‘ç«™æˆ–å­¦ä¹ ç ”ç©¶ç›®çš„ã€‚</p>
            </div>
        </div>

        <!-- ä¸»æ§åˆ¶é¢æ¿ -->
        <div class="main-card">
            <h1 class="card-title">
                <span class="icon">ğŸŒ</span>
                ç½‘é¡µå®šæ—¶åˆ·æ–°å™¨
            </h1>

            <!-- URLè¾“å…¥ -->
            <div class="input-group">
                <label>ç›®æ ‡ç½‘å€ (URL)</label>
                <div class="url-input-wrapper">
                    <input type="url" id="targetUrl" class="url-input" placeholder="è¯·è¾“å…¥ç½‘å€ (éœ€åŒ…å« https:// æˆ– http://)ï¼Œä¾‹å¦‚: https://example.com">
                </div>
            </div>

            <!-- è®¾ç½®åŒºåŸŸ -->
            <div class="settings-row">
                <div class="setting-item">
                    <label>åˆ·æ–°é—´éš”æ—¶é—´</label>
                    <input type="number" id="intervalValue" value="5" min="1" max="3600">
                    <div class="interval-presets">
                        <button class="preset-btn" data-value="1">1ç§’</button>
                        <button class="preset-btn active" data-value="5">5ç§’</button>
                        <button class="preset-btn" data-value="10">10ç§’</button>
                        <button class="preset-btn" data-value="30">30ç§’</button>
                        <button class="preset-btn" data-value="60">1åˆ†é’Ÿ</button>
                    </div>
                </div>
                <div class="setting-item">
                    <label>æ—¶é—´å•ä½</label>
                    <select id="intervalUnit">
                        <option value="1">ç§’</option>
                        <option value="60">åˆ†é’Ÿ</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label>åˆ·æ–°æ¬¡æ•°é™åˆ¶</label>
                    <select id="refreshLimit">
                        <option value="0">æ— é™åˆ¶</option>
                        <option value="10">10æ¬¡</option>
                        <option value="50">50æ¬¡</option>
                        <option value="100">100æ¬¡</option>
                        <option value="500">500æ¬¡</option>
                        <option value="1000">1000æ¬¡</option>
                    </select>
                </div>
            </div>

            <!-- é«˜çº§è®¾ç½® -->
            <div class="settings-row">
                <div class="setting-item">
                    <label>åˆ·æ–°æ¨¡å¼</label>
                    <select id="refreshMode">
                        <option value="fetch">åå°è¯·æ±‚æ¨¡å¼ (æ¨è)</option>
                        <option value="newwindow">æ–°çª—å£æ¨¡å¼</option>
                        <option value="iframe">iframe é¢„è§ˆæ¨¡å¼</option>
                    </select>
                    <div class="mode-hint" id="modeHint">æ¨¡æ‹Ÿåå°è®¿é—®ï¼Œç»•è¿‡ iframe é™åˆ¶</div>
                </div>
                <div class="setting-item">
                    <label>éšæœºå»¶è¿Ÿ (æ¨¡æ‹Ÿäººå·¥)</label>
                    <select id="randomDelay">
                        <option value="0">å…³é—­</option>
                        <option value="1" selected>0-1ç§’</option>
                        <option value="3">0-3ç§’</option>
                        <option value="5">0-5ç§’</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label>å¹¶å‘è¯·æ±‚æ•°</label>
                    <select id="concurrentRequests">
                        <option value="1" selected>1 (å•æ¬¡)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="5">5</option>
                    </select>
                </div>
            </div>

            <!-- æ§åˆ¶æŒ‰é’® -->
            <div class="control-buttons">
                <button id="startBtn" class="btn btn-start">
                    <span>â–¶</span>
                    <span>å¼€å§‹åˆ·æ–°</span>
                </button>
                <button id="stopBtn" class="btn btn-stop" disabled>
                    <span>â– </span>
                    <span>åœæ­¢åˆ·æ–°</span>
                </button>
            </div>

            <!-- çŠ¶æ€é¢æ¿ -->
            <div class="status-panel">
                <div class="status-header">
                    <div id="statusIndicator" class="status-indicator"></div>
                    <div id="statusText" class="status-text">ç­‰å¾…å¼€å§‹...</div>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div id="refreshCount" class="stat-value">0</div>
                        <div class="stat-label">åˆ·æ–°æ¬¡æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div id="successCount" class="stat-value">0</div>
                        <div class="stat-label">æˆåŠŸæ¬¡æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div id="errorCount" class="stat-value">0</div>
                        <div class="stat-label">å¤±è´¥æ¬¡æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div id="runningTime" class="stat-value">00:00:00</div>
                        <div class="stat-label">è¿è¡Œæ—¶é•¿</div>
                    </div>
                    <div class="stat-item">
                        <div id="nextRefresh" class="stat-value">--</div>
                        <div class="stat-label">ä¸‹æ¬¡åˆ·æ–°</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- é¢„è§ˆåŒºåŸŸ -->
        <div class="preview-section">
            <div class="preview-header">
                <div class="preview-title">
                    <span>ğŸ“º</span>
                    <span>é¡µé¢é¢„è§ˆ</span>
                    <span id="previewUrl" class="preview-url"></span>
                </div>
                <div class="preview-actions">
                    <button id="openNewTabBtn" class="preview-btn" disabled>
                        <span>â†—</span>
                        <span>æ–°æ ‡ç­¾é¡µæ‰“å¼€</span>
                    </button>
                    <button id="manualRefreshBtn" class="preview-btn" disabled>
                        <span>ğŸ”„</span>
                        <span>æ‰‹åŠ¨åˆ·æ–°</span>
                    </button>
                </div>
            </div>
            <div class="iframe-container">
                <div id="iframePlaceholder" class="iframe-placeholder">
                    <div class="icon">ğŸŒ</div>
                    <div>è¾“å…¥ç½‘å€å¹¶ç‚¹å‡»å¼€å§‹åˆ·æ–°</div>
                </div>
                <!-- åå°æ¨¡å¼å®æ—¶çŠ¶æ€æ˜¾ç¤º -->
                <div id="fetchStatusPanel" class="fetch-status-panel" style="display: none;">
                    <div class="status-icon" id="fetchStatusIcon">ğŸ“¡</div>
                    <div class="status-main">
                        <div class="status-title">åå°è¯·æ±‚æ¨¡å¼è¿è¡Œä¸­</div>
                        <div class="status-url" id="fetchStatusUrl"></div>
                    </div>
                    <div class="status-details">
                        <div class="detail-item">
                            <span class="detail-label">æœ€ååˆ·æ–°</span>
                            <span class="detail-value" id="lastRefreshTime">--</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">æœ€åçŠ¶æ€</span>
                            <span class="detail-value" id="lastRefreshStatus">--</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">è¯·æ±‚è€—æ—¶</span>
                            <span class="detail-value" id="lastRefreshDuration">--</span>
                        </div>
                    </div>
                    <div class="status-progress">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <div class="status-hint">è¯·æ±‚å·²å‘é€åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œç”±äºæµè§ˆå™¨å®‰å…¨ç­–ç•¥(CORS)ï¼Œæ— æ³•è¯»å–å“åº”å†…å®¹ï¼Œä½†è¯·æ±‚å·²æˆåŠŸåˆ°è¾¾</div>
                </div>
                <iframe id="previewFrame" style="display: none;" sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
            </div>
        </div>

        <!-- æ—¥å¿—åŒºåŸŸ -->
        <div class="log-section">
            <div class="log-header">
                <div class="log-title">
                    <span>ğŸ“‹</span>
                    <span>åˆ·æ–°æ—¥å¿—</span>
                </div>
                <button id="clearLogBtn" class="preview-btn">
                    <span>ğŸ—‘ï¸</span>
                    <span>æ¸…ç©ºæ—¥å¿—</span>
                </button>
            </div>
            <div id="logContainer" class="log-container">
                <div class="log-entry info">
                    <span class="log-time">[ç³»ç»Ÿ]</span>
                    <span class="log-message">å·¥å…·å·²å°±ç»ªï¼Œè¯·è¾“å…¥ç½‘å€å¼€å§‹ä½¿ç”¨</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // çŠ¶æ€å˜é‡
        let isRunning = false;
        let refreshTimer = null;
        let countdownTimer = null;
        let runningTimer = null;
        let startTime = null;
        let refreshCount = 0;
        let successCount = 0;
        let errorCount = 0;
        let countdown = 0;

        // DOM å…ƒç´ 
        const targetUrlInput = document.getElementById('targetUrl');
        const intervalValueInput = document.getElementById('intervalValue');
        const intervalUnitSelect = document.getElementById('intervalUnit');
        const refreshLimitSelect = document.getElementById('refreshLimit');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const statusIndicator = document.getElementById('statusIndicator');
        const statusText = document.getElementById('statusText');
        const refreshCountEl = document.getElementById('refreshCount');
        const successCountEl = document.getElementById('successCount');
        const errorCountEl = document.getElementById('errorCount');
        const runningTimeEl = document.getElementById('runningTime');
        const nextRefreshEl = document.getElementById('nextRefresh');
        const previewUrl = document.getElementById('previewUrl');
        const previewFrame = document.getElementById('previewFrame');
        const iframePlaceholder = document.getElementById('iframePlaceholder');
        const openNewTabBtn = document.getElementById('openNewTabBtn');
        const manualRefreshBtn = document.getElementById('manualRefreshBtn');
        const logContainer = document.getElementById('logContainer');
        const clearLogBtn = document.getElementById('clearLogBtn');
        const presetBtns = document.querySelectorAll('.preset-btn');
        const refreshModeSelect = document.getElementById('refreshMode');
        const randomDelaySelect = document.getElementById('randomDelay');
        const concurrentRequestsSelect = document.getElementById('concurrentRequests');
        const modeHint = document.getElementById('modeHint');

        // åå°æ¨¡å¼çŠ¶æ€é¢æ¿å…ƒç´ 
        const fetchStatusPanel = document.getElementById('fetchStatusPanel');
        const fetchStatusIcon = document.getElementById('fetchStatusIcon');
        const fetchStatusUrl = document.getElementById('fetchStatusUrl');
        const lastRefreshTime = document.getElementById('lastRefreshTime');
        const lastRefreshStatus = document.getElementById('lastRefreshStatus');
        const lastRefreshDuration = document.getElementById('lastRefreshDuration');
        const progressBar = document.getElementById('progressBar');

        // æ–°çª—å£å¼•ç”¨
        let popupWindow = null;
        let progressInterval = null;

        // æ¨¡å¼æç¤ºæ›´æ–°
        const modeHints = {
            'fetch': 'æ¨¡æ‹Ÿåå°è®¿é—®ï¼Œç»•è¿‡ iframe é™åˆ¶ï¼Œæ¨èä½¿ç”¨',
            'newwindow': 'åœ¨æ–°çª—å£ä¸­åˆ·æ–°ï¼Œå¯æŸ¥çœ‹å®Œæ•´é¡µé¢',
            'iframe': 'åœ¨é¡µé¢å†…é¢„è§ˆï¼Œéƒ¨åˆ†ç½‘ç«™å¯èƒ½æ‹’ç»è¿æ¥'
        };

        refreshModeSelect.addEventListener('change', () => {
            modeHint.textContent = modeHints[refreshModeSelect.value];
        });

        // å¿«æ·é—´éš”æŒ‰é’®
        presetBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const value = parseInt(btn.dataset.value);
                intervalValueInput.value = value;
                intervalUnitSelect.value = '1'; // ç§’
                presetBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        // é—´éš”å€¼å˜åŒ–æ—¶æ›´æ–°æŒ‰é’®çŠ¶æ€
        intervalValueInput.addEventListener('input', () => {
            const value = parseInt(intervalValueInput.value);
            const unit = parseInt(intervalUnitSelect.value);
            presetBtns.forEach(btn => {
                const presetValue = parseInt(btn.dataset.value);
                btn.classList.toggle('active', value === presetValue && unit === 1);
            });
        });

        // æ·»åŠ æ—¥å¿—
        function addLog(message, type = 'info') {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', { hour12: false });
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.innerHTML = `
                <span class="log-time">[${timeStr}]</span>
                <span class="log-message">${message}</span>
            `;
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        // æ¸…ç©ºæ—¥å¿—
        clearLogBtn.addEventListener('click', () => {
            logContainer.innerHTML = '';
            addLog('æ—¥å¿—å·²æ¸…ç©º', 'info');
        });

        // éªŒè¯URL
        function isValidUrl(string) {
            try {
                const url = new URL(string);
                return url.protocol === 'http:' || url.protocol === 'https:';
            } catch (_) {
                return false;
            }
        }

        // æ ¼å¼åŒ–æ—¶é—´
        function formatTime(seconds) {
            const h = Math.floor(seconds / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = seconds % 60;
            return `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
        }

        // ç”ŸæˆéšæœºæŸ¥è¯¢å‚æ•°ï¼Œæ¨¡æ‹Ÿä¸åŒè®¿é—®
        function generateRandomParams() {
            const params = new URLSearchParams();
            params.set('_t', Date.now());
            params.set('_r', Math.random().toString(36).substring(2, 8));
            return params.toString();
        }

        // è·å–éšæœºå»¶è¿Ÿæ—¶é—´
        function getRandomDelay() {
            const maxDelay = parseInt(randomDelaySelect.value);
            if (maxDelay === 0) return 0;
            return Math.floor(Math.random() * maxDelay * 1000);
        }

        // æ›´æ–°åå°æ¨¡å¼çŠ¶æ€é¢æ¿
        function updateFetchStatusPanel(time, status, duration, isSuccess) {
            lastRefreshTime.textContent = time;
            lastRefreshStatus.textContent = status;
            lastRefreshStatus.className = 'detail-value ' + (isSuccess ? 'success' : 'error');
            lastRefreshDuration.textContent = duration;

            // æ›´æ–°å›¾æ ‡åŠ¨ç”»
            fetchStatusIcon.textContent = isSuccess ? 'âœ…' : 'âŒ';
            setTimeout(() => {
                fetchStatusIcon.textContent = 'ğŸ“¡';
            }, 1000);
        }

        // ä½¿ç”¨ fetch æ¨¡å¼åˆ·æ–°
        async function fetchRefresh(url) {
            const refreshUrl = url + (url.includes('?') ? '&' : '?') + generateRandomParams();
            const startTime = performance.now();

            try {
                const response = await fetch(refreshUrl, {
                    method: 'GET',
                    mode: 'no-cors', // å…è®¸è·¨åŸŸè¯·æ±‚ï¼Œä¸è¯»å–å“åº”
                    cache: 'no-store',
                    credentials: 'omit',
                    referrerPolicy: 'no-referrer'
                });
                const duration = Math.round(performance.now() - startTime);
                const timeStr = new Date().toLocaleTimeString('zh-CN', { hour12: false });
                updateFetchStatusPanel(timeStr, 'è¯·æ±‚æˆåŠŸ', duration + 'ms', true);
                return { success: true, status: 'OK (no-cors)', duration };
            } catch (error) {
                const duration = Math.round(performance.now() - startTime);
                const timeStr = new Date().toLocaleTimeString('zh-CN', { hour12: false });
                // å³ä½¿æŠ¥é”™ï¼Œè¯·æ±‚å¯èƒ½å·²ç»å‘é€æˆåŠŸï¼ˆCORSé™åˆ¶å¯¼è‡´çš„é”™è¯¯ï¼‰
                updateFetchStatusPanel(timeStr, 'å·²å‘é€', duration + 'ms', true);
                return { success: true, status: 'å·²å‘é€', duration };
            }
        }

        // ä½¿ç”¨æ–°çª—å£æ¨¡å¼åˆ·æ–°
        function newWindowRefresh(url) {
            const refreshUrl = url + (url.includes('?') ? '&' : '?') + generateRandomParams();

            try {
                if (popupWindow && !popupWindow.closed) {
                    popupWindow.location.href = refreshUrl;
                } else {
                    popupWindow = window.open(refreshUrl, 'refreshWindow', 'width=1024,height=768,scrollbars=yes,resizable=yes');
                }
                return { success: true };
            } catch (error) {
                return { success: false, error: error.message };
            }
        }

        // ä½¿ç”¨ iframe æ¨¡å¼åˆ·æ–°
        function iframeRefresh(url) {
            const refreshUrl = url + (url.includes('?') ? '&' : '?') + generateRandomParams();

            try {
                previewFrame.src = refreshUrl;
                return { success: true };
            } catch (error) {
                return { success: false, error: error.message };
            }
        }

        // åˆ·æ–°é¡µé¢
        async function refreshPage() {
            const url = targetUrlInput.value.trim();
            const limit = parseInt(refreshLimitSelect.value);
            const mode = refreshModeSelect.value;
            const concurrent = parseInt(concurrentRequestsSelect.value);

            // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°é™åˆ¶
            if (limit > 0 && refreshCount >= limit) {
                stopRefresh();
                addLog(`å·²è¾¾åˆ°åˆ·æ–°æ¬¡æ•°é™åˆ¶ (${limit}æ¬¡)ï¼Œè‡ªåŠ¨åœæ­¢`, 'info');
                return;
            }

            // æ·»åŠ éšæœºå»¶è¿Ÿ
            const delay = getRandomDelay();
            if (delay > 0) {
                await new Promise(resolve => setTimeout(resolve, delay));
            }

            refreshCount++;
            refreshCountEl.textContent = refreshCount;

            // å¹¶å‘è¯·æ±‚
            const requests = [];
            for (let i = 0; i < concurrent; i++) {
                if (mode === 'fetch') {
                    requests.push(fetchRefresh(url));
                } else if (mode === 'newwindow') {
                    requests.push(Promise.resolve(newWindowRefresh(url)));
                } else {
                    requests.push(Promise.resolve(iframeRefresh(url)));
                }
            }

            try {
                const results = await Promise.all(requests);
                const allSuccess = results.every(r => r.success);

                if (allSuccess) {
                    successCount++;
                    successCountEl.textContent = successCount;
                    const modeText = mode === 'fetch' ? 'åå°' : (mode === 'newwindow' ? 'æ–°çª—å£' : 'iframe');
                    const concurrentText = concurrent > 1 ? ` (${concurrent}ä¸ªå¹¶å‘)` : '';
                    const delayText = delay > 0 ? ` [å»¶è¿Ÿ${(delay/1000).toFixed(1)}s]` : '';
                    addLog(`ç¬¬ ${refreshCount} æ¬¡${modeText}åˆ·æ–°æˆåŠŸ${concurrentText}${delayText}`, 'success');
                } else {
                    errorCount++;
                    errorCountEl.textContent = errorCount;
                    addLog(`ç¬¬ ${refreshCount} æ¬¡åˆ·æ–°éƒ¨åˆ†å¤±è´¥`, 'error');
                }
            } catch (error) {
                errorCount++;
                errorCountEl.textContent = errorCount;
                addLog(`ç¬¬ ${refreshCount} æ¬¡åˆ·æ–°å¤±è´¥: ${error.message}`, 'error');
            }

            // é‡ç½®å€’è®¡æ—¶
            const intervalValue = parseInt(intervalValueInput.value);
            const intervalUnit = parseInt(intervalUnitSelect.value);
            countdown = intervalValue * intervalUnit;
        }

        // æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
        function updateCountdown() {
            if (countdown > 0) {
                countdown--;
                nextRefreshEl.textContent = countdown + 's';
            }
        }

        // æ›´æ–°è¿è¡Œæ—¶é—´
        function updateRunningTime() {
            if (startTime) {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                runningTimeEl.textContent = formatTime(elapsed);
            }
        }

        // å¼€å§‹åˆ·æ–°
        function startRefresh() {
            let url = targetUrlInput.value.trim();

            if (!url) {
                addLog('è¯·è¾“å…¥ç›®æ ‡ç½‘å€', 'error');
                return;
            }

            // æ£€æŸ¥æ˜¯å¦ç¼ºå°‘åè®®å‰ç¼€ï¼Œè‡ªåŠ¨è¡¥å…¨ https://
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
                targetUrlInput.value = url;
                addLog('å·²è‡ªåŠ¨æ·»åŠ  https:// å‰ç¼€ï¼Œè¯·ç¡®è®¤ç½‘å€æ˜¯å¦æ­£ç¡®', 'info');
            }

            if (!isValidUrl(url)) {
                addLog('è¯·è¾“å…¥æœ‰æ•ˆçš„ç½‘å€ (ä»¥ http:// æˆ– https:// å¼€å¤´)', 'error');
                return;
            }

            const intervalValue = parseInt(intervalValueInput.value);
            const intervalUnit = parseInt(intervalUnitSelect.value);
            const intervalMs = intervalValue * intervalUnit * 1000;

            if (intervalMs < 1000) {
                addLog('åˆ·æ–°é—´éš”ä¸èƒ½å°äº1ç§’', 'error');
                return;
            }

            isRunning = true;
            startTime = Date.now();
            refreshCount = 0;
            successCount = 0;
            errorCount = 0;

            const mode = refreshModeSelect.value;
            const concurrent = parseInt(concurrentRequestsSelect.value);
            const randomDelayMax = parseInt(randomDelaySelect.value);

            // æ›´æ–°UI
            startBtn.disabled = true;
            stopBtn.disabled = false;
            targetUrlInput.disabled = true;
            intervalValueInput.disabled = true;
            intervalUnitSelect.disabled = true;
            refreshLimitSelect.disabled = true;
            refreshModeSelect.disabled = true;
            randomDelaySelect.disabled = true;
            concurrentRequestsSelect.disabled = true;
            openNewTabBtn.disabled = false;
            manualRefreshBtn.disabled = false;

            statusIndicator.className = 'status-indicator running';
            statusText.textContent = 'æ­£åœ¨è¿è¡Œ...';
            previewUrl.textContent = url;

            // æ ¹æ®æ¨¡å¼æ˜¾ç¤º/éšè—iframe
            if (mode === 'iframe') {
                iframePlaceholder.style.display = 'none';
                fetchStatusPanel.style.display = 'none';
                previewFrame.style.display = 'block';
            } else if (mode === 'fetch') {
                // æ˜¾ç¤ºåå°æ¨¡å¼çŠ¶æ€é¢æ¿
                iframePlaceholder.style.display = 'none';
                previewFrame.style.display = 'none';
                fetchStatusPanel.style.display = 'flex';
                fetchStatusUrl.textContent = url;
                lastRefreshTime.textContent = '--';
                lastRefreshStatus.textContent = 'ç­‰å¾…ä¸­...';
                lastRefreshStatus.className = 'detail-value';
                lastRefreshDuration.textContent = '--';

                // å¯åŠ¨è¿›åº¦æ¡åŠ¨ç”»
                let progress = 0;
                if (progressInterval) clearInterval(progressInterval);
                progressInterval = setInterval(() => {
                    progress = (progress + 2) % 100;
                    progressBar.style.width = progress + '%';
                }, 50);
            } else {
                iframePlaceholder.innerHTML = `
                    <div class="icon">ğŸªŸ</div>
                    <div>æ–°çª—å£æ¨¡å¼è¿è¡Œä¸­...</div>
                    <div style="margin-top: 10px; font-size: 0.9rem;">è¯·æŸ¥çœ‹å¼¹å‡ºçª—å£å’Œæ—¥å¿—äº†è§£åˆ·æ–°çŠ¶æ€</div>
                `;
                iframePlaceholder.style.display = 'flex';
                fetchStatusPanel.style.display = 'none';
                previewFrame.style.display = 'none';
            }

            const modeText = mode === 'fetch' ? 'åå°è¯·æ±‚' : (mode === 'newwindow' ? 'æ–°çª—å£' : 'iframe');
            const concurrentText = concurrent > 1 ? `ï¼Œ${concurrent}ä¸ªå¹¶å‘` : '';
            const delayText = randomDelayMax > 0 ? `ï¼Œéšæœºå»¶è¿Ÿ0-${randomDelayMax}ç§’` : '';
            addLog(`å¼€å§‹åˆ·æ–°: ${url}ï¼Œé—´éš” ${intervalValue} ${intervalUnit === 60 ? 'åˆ†é’Ÿ' : 'ç§’'}ï¼Œ${modeText}æ¨¡å¼${concurrentText}${delayText}`, 'info');

            // ç«‹å³åˆ·æ–°ä¸€æ¬¡
            refreshPage();

            // è®¾ç½®å€’è®¡æ—¶
            countdown = intervalValue * intervalUnit;

            // è®¾ç½®å®šæ—¶å™¨
            refreshTimer = setInterval(refreshPage, intervalMs);
            countdownTimer = setInterval(updateCountdown, 1000);
            runningTimer = setInterval(updateRunningTime, 1000);
        }

        // åœæ­¢åˆ·æ–°
        function stopRefresh() {
            isRunning = false;

            // æ¸…é™¤å®šæ—¶å™¨
            if (refreshTimer) {
                clearInterval(refreshTimer);
                refreshTimer = null;
            }
            if (countdownTimer) {
                clearInterval(countdownTimer);
                countdownTimer = null;
            }
            if (runningTimer) {
                clearInterval(runningTimer);
                runningTimer = null;
            }

            // å…³é—­å¯èƒ½æ‰“å¼€çš„æ–°çª—å£
            if (popupWindow && !popupWindow.closed) {
                popupWindow.close();
                popupWindow = null;
            }

            // åœæ­¢è¿›åº¦æ¡åŠ¨ç”»
            if (progressInterval) {
                clearInterval(progressInterval);
                progressInterval = null;
            }

            // éšè—åå°æ¨¡å¼çŠ¶æ€é¢æ¿
            fetchStatusPanel.style.display = 'none';

            // æ›´æ–°UI
            startBtn.disabled = false;
            stopBtn.disabled = true;
            targetUrlInput.disabled = false;
            intervalValueInput.disabled = false;
            intervalUnitSelect.disabled = false;
            refreshLimitSelect.disabled = false;
            refreshModeSelect.disabled = false;
            randomDelaySelect.disabled = false;
            concurrentRequestsSelect.disabled = false;

            statusIndicator.className = 'status-indicator stopped';
            statusText.textContent = 'å·²åœæ­¢';
            nextRefreshEl.textContent = '--';

            // æ¢å¤iframe placeholder
            iframePlaceholder.innerHTML = `
                <div class="icon">ğŸŒ</div>
                <div>è¾“å…¥ç½‘å€å¹¶ç‚¹å‡»å¼€å§‹åˆ·æ–°</div>
            `;

            addLog(`åˆ·æ–°å·²åœæ­¢ï¼Œå…±åˆ·æ–° ${refreshCount} æ¬¡ï¼ŒæˆåŠŸ ${successCount} æ¬¡ï¼Œå¤±è´¥ ${errorCount} æ¬¡`, 'info');
        }

        // æ‰‹åŠ¨åˆ·æ–°
        function manualRefresh() {
            const url = targetUrlInput.value.trim();
            if (url) {
                const refreshUrl = url + (url.includes('?') ? '&' : '?') + '_t=' + Date.now();
                previewFrame.src = refreshUrl;
                addLog('æ‰‹åŠ¨åˆ·æ–°æ‰§è¡Œ', 'info');
            }
        }

        // æ–°æ ‡ç­¾é¡µæ‰“å¼€
        function openInNewTab() {
            const url = targetUrlInput.value.trim();
            if (url) {
                window.open(url, '_blank');
            }
        }

        // äº‹ä»¶ç»‘å®š
        startBtn.addEventListener('click', startRefresh);
        stopBtn.addEventListener('click', stopRefresh);
        manualRefreshBtn.addEventListener('click', manualRefresh);
        openNewTabBtn.addEventListener('click', openInNewTab);

        // å›è½¦é”®å¼€å§‹åˆ·æ–°
        targetUrlInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !isRunning) {
                startRefresh();
            }
        });

        // iframe åŠ è½½é”™è¯¯å¤„ç†
        previewFrame.addEventListener('error', () => {
            errorCount++;
            errorCountEl.textContent = errorCount;
            addLog('é¡µé¢åŠ è½½å¤±è´¥ï¼ˆå¯èƒ½æ˜¯è·¨åŸŸé™åˆ¶ï¼‰', 'error');
        });

        // é¡µé¢å¸è½½æ—¶åœæ­¢åˆ·æ–°
        window.addEventListener('beforeunload', () => {
            if (isRunning) {
                stopRefresh();
            }
        });
    </script>
</body>
</html>
